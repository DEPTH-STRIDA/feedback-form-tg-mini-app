# Telegram Mini App Form Backend

–ë—ç–∫–µ–Ω–¥ –¥–ª—è –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Telegram –∏ –±–æ—Ç–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–æ—Ä–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –æ—Å—Ç–∞–≤–ª—è—Ç—å –∑–∞—è–≤–∫–∏ —á–µ—Ä–µ–∑ Telegram Mini App –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ –±–æ—Ç–∞.

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

üåê **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: [github.com/werentf/mini-app](https://github.com/werentf/mini-app)  
–ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ TypeScript —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º React.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–∏–µ–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ä–º –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ Mini App
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –Ω–æ–≤—ã—Ö –∑–∞—è–≤–∫–∞—Ö –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–µ Telegram —á–∞—Ç—ã
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞—è–≤–æ–∫ –≤ PostgreSQL
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞

## API Endpoints

### POST /api/v1/form
–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞—è–≤–∫–∏

**Headers:**
- `Authorization`: initData –æ—Ç Telegram Mini App (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)

**Request Body:**
```json
{
  "name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",     // –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ, 1-128 —Å–∏–º–≤–æ–ª–æ–≤
  "feedback": "–°–ø–æ—Å–æ–± —Å–≤—è–∑–∏",      // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, 0-256 —Å–∏–º–≤–æ–ª–æ–≤
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π"        // –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ, 0-512 —Å–∏–º–≤–æ–ª–æ–≤
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ cmd/                    # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ migrate/           # –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ internal/              # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ api/              # API —Å–ª–æ–π
‚îÇ   ‚îú‚îÄ‚îÄ service/          # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ repository/       # –†–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ model/           # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ tg/              # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
‚îî‚îÄ‚îÄ pkg/                  # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞–∫–µ—Ç—ã
    ‚îú‚îÄ‚îÄ config/          # –£—Ç–∏–ª–∏—Ç—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    ‚îî‚îÄ‚îÄ tg/              # –û–±—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è Telegram
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.21+
- PostgreSQL 14+
- Telegram Bot Token

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```env
# API
API_ADDR=localhost
API_PORT=3000
LIMITER_RATE=5
LIMITER_BURST=10

# Database
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASS=postgres
DB_NAME=tgform
DB_SSLMODE=disable

# Telegram
TG_TOKEN=your_bot_token
TG_MESSAGE_CHATS=123456789,-987654321  # ID —á–∞—Ç–æ–≤ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
TG_EXPIRATION_HOURS=24
TG_CLEANUP_INTERVAL_MINUTES=60
```

## –ó–∞–ø—É—Å–∫

1. –ú–∏–≥—Ä–∞—Ü–∏–∏:
```bash
go run cmd/migrate/main.go
```

2. API —Å–µ—Ä–≤–µ—Ä:
```bash
go run cmd/api/main.go
```

## –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ DTO –¥–ª—è API
- [ ] CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
